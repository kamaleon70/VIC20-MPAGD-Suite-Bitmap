; Spectrum Next AGD Game Compiler skeleton program
; Jonathan Cauldwell, February 2018

; Define the play area in character/block cells
; Screen is divided into 32 columns and 24 rows (Spectrum and Next/Timex) or 25 rows (CPC)
; The 4 parameters for DEFINEWINDOW are top edge, left edge, height and width respectively

DEFINEWINDOW    1 0 20 22

DEFINEFONT      0 0 0 0 0 0 0 0
                0 48 48 48 48 0 48 0
                0 108 108 0 0 0 0 0
                0 108 254 108 108 254 108 0
                0 24 126 120 126 30 126 24
                0 230 236 24 48 110 206 0
                0 48 120 48 126 204 126 0
                0 24 48 0 0 0 0 0
                0 12 24 24 24 24 12 0
                0 96 48 48 48 48 96 0
                0 0 60 24 126 24 60 0
                0 0 24 24 126 24 24 0
                0 0 0 0 0 24 24 48
                0 0 0 24 36 24 0 0
                0 0 0 0 0 56 56 0
                0 0 6 12 24 48 96 0
                0 124 238 238 238 238 124 0
                0 56 60 28 28 126 126 0
                0 124 254 30 248 246 254 0
                0 124 222 60 30 254 124 0
                0 28 60 124 220 254 60 0
                0 254 246 248 62 222 124 0
                0 124 236 242 254 238 124 0
                0 254 254 14 60 120 120 0
                0 124 238 124 238 238 124 0
                0 124 254 246 222 62 124 0
                0 0 48 48 0 48 48 0
                0 124 130 186 162 186 130 124
                0 0 12 24 48 24 12 0
                0 0 0 126 0 126 0 0
                0 0 48 24 12 24 48 0
                0 124 198 12 24 0 24 0
                0 124 222 254 254 192 124 0
                0 124 238 254 238 238 108 0
                0 124 238 252 238 254 124 0
                0 124 254 224 254 254 124 0
                0 252 238 238 254 254 252 0
                0 126 240 252 240 254 126 0
                0 126 240 252 240 240 240 0
                0 124 254 240 238 246 124 0
                0 238 238 254 254 238 238 0
                0 126 126 60 60 126 126 0
                0 30 30 30 222 254 124 0
                0 238 252 248 248 252 238 0
                0 112 240 240 252 254 126 0
                0 214 254 254 238 238 238 0
                0 206 238 254 254 238 230 0
                0 124 254 238 238 254 124 0
                0 252 238 238 252 240 240 0
                0 124 254 254 238 242 124 0
                0 252 254 238 252 238 238 0
                0 124 240 252 30 254 124 0
                0 254 254 56 124 124 124 0
                0 238 238 238 238 254 124 0
                0 238 238 238 238 124 56 0
                0 238 238 238 254 254 108 0
                0 238 254 124 254 254 238 0
                0 238 238 254 62 254 252 0
                0 254 254 184 118 254 254 0
                0 30 24 24 24 24 30 0
                0 0 192 96 48 24 12 0
                0 240 48 48 48 48 240 0
                0 48 120 252 48 48 48 0
                0 0 0 0 0 0 0 255
                0 60 102 248 96 96 254 0
                0 0 120 12 124 204 124 0
                0 96 96 124 102 102 124 0
                0 0 60 96 96 96 60 0
                0 12 12 124 204 204 124 0
                0 0 120 204 248 192 124 0
                0 28 48 56 48 48 48 0
                0 0 124 204 204 124 12 120
                0 192 192 248 204 204 204 0
                0 48 0 112 48 48 120 0
                0 12 0 12 12 12 108 56
                0 96 120 112 112 120 108 0
                0 48 48 48 48 48 28 0
                0 0 248 252 252 252 252 0
                0 0 248 204 204 204 204 0
                0 0 120 204 204 204 120 0
                0 0 248 204 204 248 192 192
                0 0 124 204 204 124 12 14
                0 0 60 96 96 96 96 0
                0 0 120 192 120 12 248 0
                0 48 120 48 48 48 28 0
                0 0 204 204 204 204 120 0
                0 0 204 204 120 120 48 0
                0 0 204 252 252 252 120 0
                0 0 204 120 48 120 204 0
                0 0 204 204 204 124 12 120
                0 0 252 24 48 96 252 0
                0 30 24 112 24 24 30 0
                0 24 24 24 24 24 24 0
                0 240 48 28 48 48 240 0
                0 60 120 0 0 0 0 0
                124 198 187 227 227 187 198 124

; Background blocks to be used in the game
; First we define the type - eg EMPTYBLOCK, PLATFORMBLOCK or DEADLYBLOCK
; Next 16 numbers are alternating graphic and attribute bytes from top to bottom

; Block 0

DEFINEBLOCK EMPTYBLOCK 0,0,0,0,0,0,0,0,1
DEFINEBLOCK WALLBLOCK  1,1,1,255,16,16,16,255,1
; Sprites
; First argument defines the number of frames
; Then 32 bytes for each sprite frame (Spectrum and Timex) or 80 bytes (CPC).

DEFINESPRITE    6
                0 0 3 224 7 248 15 0 14 200 5 252 0 248 3 96
                13 120 30 128 31 160 61 160 59 168 61 172 26 206 7 5
                6 227 9 240 30 240 60 88 120 56 96 48 88 14 60 31

                0 0 7 192 15 240 31 0 30 144 13 248 3 240 1 192
                26 240 61 0 63 176 123 176 119 180 123 182 53 165 30 2
                12 224 3 240 30 240 60 88 120 56 96 48 88 14 60 31

                0 0 7 192 15 240 31 0 30 144 13 248 3 240 1 192
                26 240 61 0 63 176 123 176 119 180 123 182 53 165 30 2
                12 224 3 240 30 240 60 88 120 56 96 48 88 14 60 31

                0 0 3 224 7 248 15 0 14 200 5 252 0 248 3 96
                13 120 30 128 31 160 61 160 59 168 61 172 26 206 7 5
                6 227 9 240 30 240 60 88 120 56 96 48 88 14 60 31

                0 0 3 224 7 248 15 0 14 200 5 252 0 248 3 96
                13 120 30 128 31 160 61 160 59 168 61 172 26 206 7 5
                6 227 9 240 30 240 60 88 120 56 96 48 88 14 60 31

                0 0 3 224 7 248 15 0 14 200 5 252 0 248 3 96
                13 120 30 128 31 160 61 160 59 168 61 172 26 206 7 5
                6 227 9 240 30 240 60 88 120 56 96 48 88 14 60 31

DEFINESPRITE    6
                0 0 7 192 31 224 0 240 19 112 63 160 31 0 6 192
                30 176 1 120 5 248 5 188 21 220 53 188 115 88 160 224
                199 96 15 144 15 120 26 60 28 30 12 6 112 26 248 60

                0 0 3 224 15 240 0 248 9 120 31 176 15 192 3 128
                15 88 0 188 13 252 13 222 45 238 109 222 165 172 64 120
                7 48 15 192 15 120 26 60 28 30 12 6 112 26 248 60

                0 0 3 224 15 240 0 248 9 120 31 176 15 192 3 128
                15 88 0 188 13 252 13 222 45 238 109 222 165 172 64 120
                7 48 15 192 15 120 26 60 28 30 12 6 112 26 248 60

                0 0 7 192 31 224 0 240 19 112 63 160 31 0 6 192
                30 176 1 120 5 248 5 188 21 220 53 188 115 88 160 224
                199 96 15 144 15 120 26 60 28 30 12 6 112 26 248 60

                0 0 7 192 31 224 0 240 19 112 63 160 31 0 6 192
                30 176 1 120 5 248 5 188 21 220 53 188 115 88 160 224
                199 96 15 144 15 120 26 60 28 30 12 6 112 26 248 60

                0 0 7 192 31 224 0 240 19 112 63 160 31 0 6 192
                30 176 1 120 5 248 5 188 21 220 53 188 115 88 160 224
                199 96 15 144 15 120 26 60 28 30 12 6 112 26 248 60

DEFINESPRITE    6
                0 0 0 0 3 224 7 248 15 0 14 200 5 252 2 248
                13 96 30 120 31 128 61 160 59 168 61 172 26 204 7 10
                6 230 9 240 30 240 60 88 120 58 96 54 88 14 60 28

                0 0 3 224 7 248 15 0 14 200 5 252 0 248 3 96
                5 120 6 128 15 160 15 32 14 160 14 40 13 140 5 212
                1 152 8 64 30 224 61 224 217 112 224 192 96 176 48 120

                0 0 3 224 7 248 15 0 14 200 5 252 0 248 3 96
                5 120 14 128 15 160 15 32 6 160 7 0 3 160 5 112
                6 96 41 128 55 160 55 96 40 192 3 0 2 192 1 224

                0 0 3 224 7 248 15 0 14 200 5 252 0 248 3 96
                1 120 2 128 3 160 11 160 27 32 51 192 53 232 38 220
                48 24 6 96 7 176 7 144 1 96 4 240 11 0 7 128

                0 0 0 0 3 224 7 248 15 0 14 200 5 252 2 248
                1 96 6 120 15 128 14 160 14 160 15 0 3 160 5 112
                6 96 1 128 5 248 14 216 31 54 48 44 44 24 30 0

                0 0 0 0 3 224 7 248 15 0 14 200 5 252 2 248
                1 96 14 120 15 128 30 160 29 160 30 160 15 64 2 200
                0 200 1 48 13 248 30 253 62 27 36 7 24 2 60 0

DEFINESPRITE    6
                0 0 0 0 7 192 31 224 0 240 19 112 63 160 31 64
                6 176 30 120 1 248 5 188 21 220 53 188 51 88 80 224
                103 96 15 144 15 120 26 60 92 30 108 6 112 26 56 60

                0 0 7 192 31 224 0 240 19 112 63 160 31 0 6 192
                30 160 1 96 5 240 4 240 5 112 20 112 49 176 43 160
                25 128 2 16 7 120 7 188 14 155 3 7 13 6 30 12

                0 0 7 192 31 224 0 240 19 112 63 160 31 0 6 192
                30 160 1 112 5 240 4 240 5 96 0 224 5 192 14 160
                6 96 1 148 5 236 6 236 3 20 0 192 3 64 7 128

                0 0 7 192 31 224 0 240 19 112 63 160 31 0 6 192
                30 128 1 64 5 192 5 208 4 216 3 204 23 172 59 100
                24 12 6 96 13 224 9 224 6 128 15 32 0 208 1 224

                0 0 0 0 7 192 31 224 0 240 19 112 63 160 31 64
                6 128 30 96 1 240 5 112 5 112 0 240 5 192 14 160
                6 96 1 128 31 160 27 112 108 248 52 12 24 52 0 120

                0 0 0 0 7 192 31 224 0 240 19 112 63 160 31 64
                6 128 30 112 1 240 5 120 5 184 5 120 2 240 19 64
                19 0 12 128 31 176 191 120 216 124 224 36 64 24 0 60


; Screen layouts are best arranged in monospaced rows and columns
; DEFINESCREEN is followed by the block numbers that make up the screen
; Our play area is 22x22, so we need 22 rows of 22 columns
; The compiler will automatically compress screens

DEFINESCREEN
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1

SPRITEPOSITION 0,0,80,40

; Define objects
; Spectrum: First number is attribute, then the starting room, next 2 are for Y and X coordinates then 32 for image.
; Timex: First number is the starting room, next 2 are for Y and X coordinates then 32 for image.
; CPC: First number is the starting room, next 2 are for Y and X coordinates then 80 for image.
; Coordinates are based on Spectrum screen, even for CPC so need to change for conversions

; Spectrum:
DEFINEOBJECT    0,255,5,6     ; attribute, room, Y, X
         255,255,128,1,128,1,128,1
         129,1,129,1,129,1,129,1
         129,1,129,1,129,1,129,1
         128,1,128,1,128,1,255,255

DEFINEOBJECT    0,255,11,11     ; attribute, room, Y, X
         255,255,128,1,128,1,128,1
         131,129,128,129,128,129,131,129
         130,1,130,1,130,1,131,129
         128,1,128,1,128,1,255,255

DEFINEOBJECT    0,255,19,18     ; attribute, room, Y, X
         255,255,128,1,128,1,128,1
         131,129,128,129,128,129,131,129
         128,129,128,129,128,129,131,129
         128,1,128,1,128,1,255,255
; Map.
; First argument is WIDTH, second is the startscreen
; We then arrange the map as a grid with correct width, monospaced here for readability
; where no room is present we put 255

MAP		WIDTH 3
		STARTSCREEN 0
		255 000 255
ENDMAP

; Sprite events

; Player controls
EVENT PLAYER
 FALL

 LET I 0

 IF KEY LEFT
   LET IMAGE 3
   LET DIRECTION 1
   LET I 1
   IF CANGOLEFT
     SPRITELEFT
   ENDIF
 ENDIF

 IF KEY RIGHT
   LET IMAGE 2
   LET DIRECTION 0
   LET I 1
   IF CANGORIGHT
     SPRITERIGHT
   ENDIF
 ENDIF

 IF I 0
   LET IMAGE DIRECTION
 ENDIF

 IF KEY FIRE
   TABLEJUMP
 ENDIF

 ANIMATE

EVENT SPRITETYPE1

EVENT SPRITETYPE2

EVENT SPRITETYPE3

EVENT SPRITETYPE4

EVENT SPRITETYPE5

EVENT SPRITETYPE6

EVENT SPRITETYPE7

EVENT SPRITETYPE8

EVENT INITSPRITE

EVENT MAINLOOP1
 
IF KEY OPTION1
NEXTLEVEL
ENDIF

EVENT MAINLOOP2
AT 23,20:DISPLAY TRIPLEDIGITS CLOCK

EVENT INTROMENU
  CLS

EVENT GAMEINIT

EVENT RESTARTSCREEN
  PAPER 0
  AT 0,4
  INK 1:PRINT"BIG SPRITE DEMO"
 
EVENT FELLTOOFAR

EVENT KILLPLAYER

EVENT LOSTGAME

EVENT COMPLETEDGAME

EVENT NEWHIGHSCORE

EVENT COLLECTBLOCK
GET 0
